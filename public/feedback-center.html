<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مركز التواصل والتحسينات - نظام الطلاب</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .navigation {
            display: flex;
            background: #2c3e50;
            color: white;
            overflow-x: auto;
        }
        
        .nav-btn {
            background: none;
            border: none;
            color: white;
            padding: 20px 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: #34495e;
            border-bottom-color: #e74c3c;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .section.active {
            display: block;
        }
        
        .feedback-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .feedback-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .feedback-card:hover {
            border-color: #e74c3c;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .card-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .card-title {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .card-description {
            color: #7f8c8d;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .form-group {
            margin-bottom: 25px;
            text-align: right;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.2);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .rating-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .star {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .star:hover,
        .star.active {
            color: #f39c12;
            transform: scale(1.1);
        }
        
        .emoji-rating {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .emoji-btn {
            font-size: 40px;
            background: none;
            border: 3px solid #e9ecef;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .emoji-btn:hover,
        .emoji-btn.active {
            border-color: #e74c3c;
            transform: scale(1.1);
            background: #fff5f5;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.3);
        }
        
        .recent-feedback {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-right: 4px solid #e74c3c;
        }
        
        .feedback-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            color: #6c757d;
            font-size: 14px;
        }
        
        .feedback-content {
            color: #2c3e50;
            line-height: 1.6;
        }
        
        .contact-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .contact-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .contact-card:hover {
            border-color: #e74c3c;
            background: white;
        }
        
        .status-message {
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
            display: none;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>💬 مركز التواصل والتحسينات</h1>
            <p>شاركنا رأيك واقتراحاتك لتطوير النظام</p>
        </div>
        
        <div class="navigation">
            <button class="nav-btn active" onclick="showSection('feedback')">📝 اترك رسالة</button>
            <button class="nav-btn" onclick="showSection('review')">⭐ تقييم النظام</button>
            <button class="nav-btn" onclick="showSection('suggestion')">💡 اقتراح تحسين</button>
            <button class="nav-btn" onclick="showSection('contact')">📞 تواصل معنا</button>
            <button class="nav-btn" onclick="showSection('recent')">📋 آخر التعليقات</button>
        </div>
        
        <div class="content">
            <!-- Feedback Section -->
            <div id="feedback" class="section active">
                <div class="feedback-grid">
                    <div class="feedback-card">
                        <div class="card-icon">📧</div>
                        <h3 class="card-title">رسالة عامة</h3>
                        <p class="card-description">
                            شاركنا أي رسالة أو ملاحظة عن النظام
                        </p>
                    </div>
                    <div class="feedback-card">
                        <div class="card-icon">🐛</div>
                        <h3 class="card-title">تبليغ عن مشكلة</h3>
                        <p class="card-description">
                            أبلغنا عن أي مشكلة تقنية واجهتها
                        </p>
                    </div>
                    <div class="feedback-card">
                        <div class="card-icon">❓</div>
                        <h3 class="card-title">طلب مساعدة</h3>
                        <p class="card-description">
                            احصل على المساعدة في استخدام النظام
                        </p>
                    </div>
                </div>
                
                <form id="feedbackForm">
                    <div class="form-group">
                        <label for="feedbackType">نوع الرسالة:</label>
                        <select id="feedbackType" required>
                            <option value="">اختر نوع الرسالة...</option>
                            <option value="general">رسالة عامة</option>
                            <option value="bug">تبليغ عن مشكلة</option>
                            <option value="help">طلب مساعدة</option>
                            <option value="feature">طلب ميزة جديدة</option>
                            <option value="complaint">شكوى</option>
                            <option value="compliment">إشادة</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="userType">نوع المستخدم:</label>
                        <select id="userType" required>
                            <option value="">من أنت؟</option>
                            <option value="student">طالب</option>
                            <option value="parent">ولي أمر</option>
                            <option value="teacher">معلم</option>
                            <option value="assistant">مساعد</option>
                            <option value="admin">إداري</option>
                            <option value="visitor">زائر</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="userName">الاسم (اختياري):</label>
                        <input type="text" id="userName" placeholder="اسمك أو كود الطالب">
                    </div>
                    
                    <div class="form-group">
                        <label for="userContact">وسيلة التواصل (اختياري):</label>
                        <input type="text" id="userContact" placeholder="رقم الهاتف أو البريد الإلكتروني">
                    </div>
                    
                    <div class="form-group">
                        <label for="messageSubject">موضوع الرسالة:</label>
                        <input type="text" id="messageSubject" required placeholder="موضوع مختصر للرسالة">
                    </div>
                    
                    <div class="form-group">
                        <label for="messageContent">محتوى الرسالة:</label>
                        <textarea id="messageContent" required placeholder="اكتب رسالتك هنا بالتفصيل..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="urgency">مستوى الأهمية:</label>
                        <select id="urgency">
                            <option value="low">منخفض - استفسار عادي</option>
                            <option value="medium" selected>متوسط - يحتاج متابعة</option>
                            <option value="high">عالي - مشكلة مهمة</option>
                            <option value="urgent">عاجل - يحتاج حل فوري</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="submit-btn">📤 إرسال الرسالة</button>
                </form>
                
                <div id="feedbackStatus" class="status-message"></div>
            </div>
            
            <!-- Review Section -->
            <div id="review" class="section">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="color: #2c3e50; margin-bottom: 15px;">⭐ قيم تجربتك مع النظام</h2>
                    <p style="color: #7f8c8d; font-size: 16px;">تقييمك يساعدنا في تحسين الخدمة</p>
                </div>
                
                <form id="reviewForm">
                    <div class="form-group">
                        <label>تقييم عام للنظام:</label>
                        <div class="rating-container">
                            <span class="star" onclick="setRating('overall', 1)">⭐</span>
                            <span class="star" onclick="setRating('overall', 2)">⭐</span>
                            <span class="star" onclick="setRating('overall', 3)">⭐</span>
                            <span class="star" onclick="setRating('overall', 4)">⭐</span>
                            <span class="star" onclick="setRating('overall', 5)">⭐</span>
                        </div>
                        <div id="overallRatingText" style="text-align: center; margin-top: 10px; color: #6c757d;"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>سهولة الاستخدام:</label>
                        <div class="emoji-rating">
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('usability', 1)">😫</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('usability', 2)">😐</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('usability', 3)">🙂</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('usability', 4)">😊</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('usability', 5)">🤩</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>سرعة النظام:</label>
                        <div class="emoji-rating">
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('speed', 1)">🐌</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('speed', 2)">🚶</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('speed', 3)">🚗</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('speed', 4)">🏎️</button>
                            <button type="button" class="emoji-btn" onclick="setEmojiRating('speed', 5)">🚀</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="reviewerName">اسمك (اختياري):</label>
                        <input type="text" id="reviewerName" placeholder="اسمك أو كود الطالب">
                    </div>
                    
                    <div class="form-group">
                        <label for="reviewText">تعليقك على النظام:</label>
                        <textarea id="reviewText" placeholder="اكتب تجربتك مع النظام، ما أعجبك وما يحتاج تحسين..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="recommendSystem">هل تنصح الآخرين بهذا النظام؟</label>
                        <select id="recommendSystem">
                            <option value="">اختر...</option>
                            <option value="definitely">بالتأكيد - ممتاز</option>
                            <option value="probably">على الأرجح - جيد</option>
                            <option value="maybe">ربما - متوسط</option>
                            <option value="probably_not">على الأرجح لا - يحتاج تحسين</option>
                            <option value="definitely_not">بالتأكيد لا - غير مناسب</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="submit-btn">⭐ إرسال التقييم</button>
                </form>
                
                <div id="reviewStatus" class="status-message"></div>
            </div>
            
            <!-- Suggestion Section -->
            <div id="suggestion" class="section">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="color: #2c3e50; margin-bottom: 15px;">💡 اقترح تحسينات للنظام</h2>
                    <p style="color: #7f8c8d; font-size: 16px;">أفكارك تساعدنا في تطوير النظام ليكون أفضل</p>
                </div>
                
                <form id="suggestionForm">
                    <div class="form-group">
                        <label for="suggestionCategory">فئة الاقتراح:</label>
                        <select id="suggestionCategory" required>
                            <option value="">اختر فئة الاقتراح...</option>
                            <option value="ui">تحسين واجهة المستخدم</option>
                            <option value="feature">ميزة جديدة</option>
                            <option value="performance">تحسين الأداء</option>
                            <option value="mobile">تحسينات الجوال</option>
                            <option value="reporting">التقارير والإحصائيات</option>
                            <option value="integration">تكامل مع أنظمة أخرى</option>
                            <option value="security">الأمان والحماية</option>
                            <option value="other">أخرى</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="suggestionTitle">عنوان الاقتراح:</label>
                        <input type="text" id="suggestionTitle" required placeholder="عنوان مختصر للاقتراح">
                    </div>
                    
                    <div class="form-group">
                        <label for="suggestionDescription">وصف الاقتراح بالتفصيل:</label>
                        <textarea id="suggestionDescription" required placeholder="اشرح اقتراحك بالتفصيل: ما هو؟ لماذا مفيد؟ كيف يعمل؟"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="suggestionBenefit">الفائدة المتوقعة:</label>
                        <textarea id="suggestionBenefit" placeholder="كيف سيحسن هذا الاقتراح تجربة المستخدمين؟"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="suggestionPriority">أولوية التنفيذ:</label>
                        <select id="suggestionPriority">
                            <option value="low">منخفضة - حسن أن يكون موجود</option>
                            <option value="medium" selected>متوسطة - مفيد جداً</option>
                            <option value="high">عالية - مطلوب بشدة</option>
                            <option value="critical">حرج - ضروري للغاية</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="suggesterInfo">معلومات المقترح (اختياري):</label>
                        <input type="text" id="suggesterInfo" placeholder="اسمك أو كيف نتواصل معك">
                    </div>
                    
                    <button type="submit" class="submit-btn">💡 إرسال الاقتراح</button>
                </form>
                
                <div id="suggestionStatus" class="status-message"></div>
            </div>
            
            <!-- Contact Section -->
            <div id="contact" class="section">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="color: #2c3e50; margin-bottom: 15px;">📞 تواصل معنا مباشرة</h2>
                    <p style="color: #7f8c8d; font-size: 16px;">اختر الطريقة الأنسب للتواصل</p>
                </div>
                
                <div class="contact-options">
                    <div class="contact-card" onclick="openWhatsApp()">
                        <div style="font-size: 40px; margin-bottom: 15px; color: #25d366;">💬</div>
                        <h3>واتساب</h3>
                        <p>تواصل مباشر وسريع</p>
                        <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">انقر للمحادثة</p>
                    </div>
                    
                    <div class="contact-card" onclick="openEmail()">
                        <div style="font-size: 40px; margin-bottom: 15px; color: #ea4335;">📧</div>
                        <h3>البريد الإلكتروني</h3>
                        <p>للاستفسارات التفصيلية</p>
                        <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">انقر للإرسال</p>
                    </div>
                    
                    <div class="contact-card" onclick="callPhone()">
                        <div style="font-size: 40px; margin-bottom: 15px; color: #4285f4;">📱</div>
                        <h3>مكالمة مباشرة</h3>
                        <p>للحالات العاجلة</p>
                        <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">انقر للاتصال</p>
                    </div>
                    
                    <div class="contact-card" onclick="scheduleCall()">
                        <div style="font-size: 40px; margin-bottom: 15px; color: #ff9800;">📅</div>
                        <h3>حجز موعد</h3>
                        <p>للاستشارات المطولة</p>
                        <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">انقر للحجز</p>
                    </div>
                </div>
                
                <!-- Quick Contact Form -->
                <div style="background: #f8f9fa; border-radius: 15px; padding: 30px; margin-top: 30px;">
                    <h3 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">✉️ رسالة سريعة</h3>
                    <form id="quickContactForm">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div class="form-group">
                                <input type="text" id="quickName" placeholder="اسمك" required>
                            </div>
                            <div class="form-group">
                                <input type="text" id="quickContact" placeholder="رقم الهاتف أو الإيميل" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <textarea id="quickMessage" placeholder="رسالتك السريعة..." required style="min-height: 80px;"></textarea>
                        </div>
                        <button type="submit" class="submit-btn" style="background: #28a745;">📞 إرسال سريع</button>
                    </form>
                    <div id="quickContactStatus" class="status-message"></div>
                </div>
            </div>
            
            <!-- Recent Feedback Section -->
            <div id="recent" class="section">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="color: #2c3e50; margin-bottom: 15px;">📋 آخر التعليقات والاقتراحات</h2>
                    <p style="color: #7f8c8d; font-size: 16px;">شاهد ما يقوله المستخدمون الآخرون</p>
                </div>
                
                <div id="recentFeedbackList">
                    <!-- Recent feedback will be loaded here -->
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="loadMoreFeedback()" class="submit-btn" style="width: auto; background: #6c757d;">
                        📄 عرض المزيد
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let ratings = {
            overall: 0,
            usability: 0,
            speed: 0
        };
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons  
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            // Load data for specific sections
            if (sectionId === 'recent') {
                loadRecentFeedback();
            }
        }
        
        function setRating(type, rating) {
            ratings[type] = rating;
            
            // Update star display
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                star.classList.toggle('active', index < rating);
            });
            
            // Update rating text
            const ratingTexts = {
                1: 'ضعيف جداً',
                2: 'ضعيف', 
                3: 'متوسط',
                4: 'جيد',
                5: 'ممتاز'
            };
            
            document.getElementById('overallRatingText').textContent = 
                `${rating}/5 - ${ratingTexts[rating]}`;
        }
        
        function setEmojiRating(type, rating) {
            ratings[type] = rating;
            
            // Update emoji display based on type
            const container = event.target.parentElement;
            const emojis = container.querySelectorAll('.emoji-btn');
            emojis.forEach((emoji, index) => {
                emoji.classList.toggle('active', index === rating - 1);
            });
        }
        
        // Form submissions
        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            e.preventDefault();
            submitFeedback();
        });
        
        document.getElementById('reviewForm').addEventListener('submit', function(e) {
            e.preventDefault();
            submitReview();
        });
        
        document.getElementById('suggestionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            submitSuggestion();
        });
        
        document.getElementById('quickContactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            submitQuickContact();
        });
        
        async function submitFeedback() {
            const data = {
                type: document.getElementById('feedbackType').value,
                userType: document.getElementById('userType').value,
                userName: document.getElementById('userName').value,
                userContact: document.getElementById('userContact').value,
                subject: document.getElementById('messageSubject').value,
                message: document.getElementById('messageContent').value,
                urgency: document.getElementById('urgency').value,
                timestamp: new Date().toISOString()
            };
            
            try {
                showStatus('feedbackStatus', 'جاري إرسال الرسالة...', 'success');
                
                // Simulate API call - replace with real endpoint
                await simulateApiCall(data, '/api/feedback');
                
                showStatus('feedbackStatus', '✅ تم إرسال رسالتك بنجاح! سنتواصل معك قريباً.', 'success');
                document.getElementById('feedbackForm').reset();
                
                // Store locally for demo
                storeFeedbackLocally('feedback', data);
                
            } catch (error) {
                showStatus('feedbackStatus', '❌ حدث خطأ في الإرسال، برجاء المحاولة مرة أخرى.', 'error');
            }
        }
        
        async function submitReview() {
            const data = {
                overallRating: ratings.overall,
                usabilityRating: ratings.usability,
                speedRating: ratings.speed,
                reviewerName: document.getElementById('reviewerName').value,
                reviewText: document.getElementById('reviewText').value,
                recommendation: document.getElementById('recommendSystem').value,
                timestamp: new Date().toISOString()
            };
            
            if (!ratings.overall) {
                showStatus('reviewStatus', '⚠️ برجاء إعطاء تقييم عام للنظام أولاً.', 'error');
                return;
            }
            
            try {
                showStatus('reviewStatus', 'جاري إرسال التقييم...', 'success');
                
                await simulateApiCall(data, '/api/review');
                
                showStatus('reviewStatus', '⭐ شكراً لك! تم إرسال تقييمك بنجاح.', 'success');
                document.getElementById('reviewForm').reset();
                ratings = { overall: 0, usability: 0, speed: 0 };
                
                // Reset rating displays
                document.querySelectorAll('.star, .emoji-btn').forEach(el => {
                    el.classList.remove('active');
                });
                document.getElementById('overallRatingText').textContent = '';
                
                storeFeedbackLocally('review', data);
                
            } catch (error) {
                showStatus('reviewStatus', '❌ حدث خطأ في إرسال التقييم.', 'error');
            }
        }
        
        async function submitSuggestion() {
            const data = {
                category: document.getElementById('suggestionCategory').value,
                title: document.getElementById('suggestionTitle').value,
                description: document.getElementById('suggestionDescription').value,
                benefit: document.getElementById('suggestionBenefit').value,
                priority: document.getElementById('suggestionPriority').value,
                suggesterInfo: document.getElementById('suggesterInfo').value,
                timestamp: new Date().toISOString()
            };
            
            try {
                showStatus('suggestionStatus', 'جاري إرسال الاقتراح...', 'success');
                
                await simulateApiCall(data, '/api/suggestion');
                
                showStatus('suggestionStatus', '💡 تم إرسال اقتراحك بنجاح! سنقوم بدراسته.', 'success');
                document.getElementById('suggestionForm').reset();
                
                storeFeedbackLocally('suggestion', data);
                
            } catch (error) {
                showStatus('suggestionStatus', '❌ حدث خطأ في إرسال الاقتراح.', 'error');
            }
        }
        
        async function submitQuickContact() {
            const data = {
                name: document.getElementById('quickName').value,
                contact: document.getElementById('quickContact').value,
                message: document.getElementById('quickMessage').value,
                timestamp: new Date().toISOString()
            };
            
            try {
                showStatus('quickContactStatus', 'جاري الإرسال...', 'success');
                
                await simulateApiCall(data, '/api/quick-contact');
                
                showStatus('quickContactStatus', '📞 تم إرسال رسالتك! سنتواصل معك خلال 24 ساعة.', 'success');
                document.getElementById('quickContactForm').reset();
                
                storeFeedbackLocally('contact', data);
                
            } catch (error) {
                showStatus('quickContactStatus', '❌ حدث خطأ في الإرسال.', 'error');
            }
        }
        
        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status-message status-${type}`;
            element.style.display = 'block';
            
            // Auto hide after 5 seconds for success messages
            if (type === 'success') {
                setTimeout(() => {
                    element.style.display = 'none';
                }, 5000);
            }
        }
        
        async function simulateApiCall(data, endpoint) {
            // For now, simulate API call - replace with real backend later
            console.log('Submitting to:', endpoint, data);
            return new Promise(resolve => setTimeout(resolve, 1000));
        }
        
        function storeFeedbackLocally(type, data) {
            const key = `feedback_${type}`;
            const existing = JSON.parse(localStorage.getItem(key) || '[]');
            existing.unshift(data);
            
            // Keep only last 50 items
            if (existing.length > 50) {
                existing.splice(50);
            }
            
            localStorage.setItem(key, JSON.stringify(existing));
        }
        
        function loadRecentFeedback() {
            const container = document.getElementById('recentFeedbackList');
            container.innerHTML = '';
            
            const types = ['feedback', 'review', 'suggestion', 'contact'];
            let allFeedback = [];
            
            types.forEach(type => {
                const items = JSON.parse(localStorage.getItem(`feedback_${type}`) || '[]');
                items.forEach(item => {
                    item.feedbackType = type;
                    allFeedback.push(item);
                });
            });
            
            // Sort by timestamp, newest first
            allFeedback.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Show recent 10 items
            allFeedback.slice(0, 10).forEach(item => {
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'recent-feedback';
                
                const typeEmoji = {
                    feedback: '📝',
                    review: '⭐',
                    suggestion: '💡',
                    contact: '📞'
                };
                
                const date = new Date(item.timestamp).toLocaleDateString('ar-EG');
                const time = new Date(item.timestamp).toLocaleTimeString('ar-EG', {hour: '2-digit', minute: '2-digit'});
                
                feedbackDiv.innerHTML = `
                    <div class="feedback-meta">
                        <span>${typeEmoji[item.feedbackType]} ${item.feedbackType === 'feedback' ? 'رسالة' : item.feedbackType === 'review' ? 'تقييم' : item.feedbackType === 'suggestion' ? 'اقتراح' : 'تواصل'}</span>
                        <span>${date} ${time}</span>
                    </div>
                    <div class="feedback-content">
                        <strong>${item.subject || item.title || 'رسالة'}:</strong><br>
                        ${(item.message || item.description || item.reviewText || '').substring(0, 200)}${(item.message || item.description || item.reviewText || '').length > 200 ? '...' : ''}
                    </div>
                `;
                
                container.appendChild(feedbackDiv);
            });
            
            if (allFeedback.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <div style="font-size: 48px; margin-bottom: 20px;">📭</div>
                        <h3>لا توجد تعليقات بعد</h3>
                        <p>كن أول من يترك تعليق أو اقتراح!</p>
                    </div>
                `;
            }
        }
        
        function loadMoreFeedback() {
            alert('ميزة عرض المزيد قيد التطوير');
        }
        
        // Contact functions
        function openWhatsApp() {
            const message = encodeURIComponent('مرحباً، أريد التواصل بخصوص نظام إدارة الطلاب');
            window.open(`https://wa.me/[YOUR_WHATSAPP_NUMBER]?text=${message}`, '_blank');
        }
        
        function openEmail() {
            const subject = encodeURIComponent('استفسار بخصوص نظام إدارة الطلاب');
            window.open(`mailto:your-email@domain.com?subject=${subject}`, '_blank');
        }
        
        function callPhone() {
            if (confirm('هل تريد الاتصال الآن؟')) {
                window.open('tel:+966501234567');
            }
        }
        
        function scheduleCall() {
            alert('سيتم فتح نظام حجز المواعيد قريباً!');
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadRecentFeedback();
        });
    </script>
</body>
</html>
